# CRAB: Cross-environment Agent Benchmark for Multimodal Language Model Agents

## 思维导图
![思维导图](/imgs/CRAB-Cross-environment-Agent-Benchmark-for-Multimodal-Language-Model-Agents.jpg)

## 全文总结
“CRAB: CROSS-ENVIRONMENT AGENT BENCHMARK FOR MULTIMODAL LANGUAGE MODEL AGENTS” 由 Xu Tianqi 等人撰写。文章介绍了 CRAB 框架及基准测试，用于评估多模态语言模型（MLM）智能体在跨环境任务中的性能，解决了现有基准测试的局限性。
### 1.研究背景
#### 智能体发展依赖 MLM：
自主智能体发展依赖 MLM 处理自然语言任务，但现有基准测试存在交互方法、平台多样性、评估指标和任务创建等方面的局限。
#### 现有基准测试的不足：
如部分通过预收集数据交互，无法捕捉动态性；多在单一平台评估，与实际多平台任务不符；评估方法不够全面或公平；任务创建缺乏多样性和扩展性。
### 2.CRAB 框架
#### 问题定义：
将执行跨环境任务的设备视为环境，定义为无奖励的 POMDP。任务是跨环境操作的自然语言指令，智能体系统根据策略执行任务，可由单智能体或多智能体协作完成。
#### 任务分解图（GDT）：
复杂任务分解为有顺序和并行关系的子任务，形成有向无环图（DAG）。每个子任务是包含环境、指令和奖励函数的元组，节点间的边表示任务顺序。
#### 跨环境智能体交互：
CRAB 为智能体提供统一接口，通过网络将动作路由到设备，可适应多种平台和设备。
#### 图评估器：
基于 GDT 构建，通过检查中间状态评估智能体任务完成情况，关注关键中间状态，不依赖特定动作路径，支持多有效路径，比传统评估方法更细粒度。
#### 评估指标：
除成功率（SR）外，还包括完成率（CR）、执行效率（EE）和成本效率（CE）。CR 衡量完成子任务节点比例，EE 反映执行动作效率，CE 评估资源消耗效率。
#### 任务和评估器构建：
通过子任务构建 GDT 解决评估器创建复杂问题，采用模板结构和消息传递概念，确保任务和评估器正确组合，实现自动生成评估器。
### 3.Crab Benchmark - v0
#### 环境：
由安卓模拟器和 Ubuntu 虚拟机组成，确保初始状态一致。观察空间为屏幕截图，使用视觉提示方法标记交互元素，动作空间接近真实设备交互。
#### 任务：
精心构建 17 个安卓和 19 个 Ubuntu 子任务模板，生成 104 个组合任务和 16 个手工任务，共 120 个任务，比其他基准测试更复杂，能有效评估智能体泛化能力。
#### 评估器：
为评估子任务中间状态，实现了一套执行评估器，包括基于 XML、图像匹配和 OCR 等技术，部分任务还使用爬虫脚本捕获动态值，平均每个任务有 4.2 个评估器。
### 4.实验结果
#### 基线智能体系统：
选择 6 种满足条件的 MLM，设计单智能体、按功能多智能体和按环境多智能体三种结构，实验设置保证一致性，单智能体设置需时较长。
#### 实验结果分析
##### 模型比较：
GPT - 4o 和 GPT - 4 Turbo 成功率和完成率较高，GPT - 4o 在安卓和跨平台任务表现更好，Claude 3 在完成率上优于 Gemini 1.5，但与 GPT - 4 系列仍有差距。效率方面，GPT - 4 系列表现出色，GPT - 4o 成本效益更高。开源模型理解任务但执行动作常出错，且分析任务完成情况能力弱。
##### 智能体结构比较：
多智能体结构性能略低于单智能体，因通信中信息丢失易导致误解和无效动作，且效率较低。
##### 平台比较：
GPT - 4o 在安卓和跨平台任务表现佳，Gemini、Claude 等在安卓设备表现较好，可能因训练数据差异。无效动作率显示智能体遵循指令能力，函数调用对结构化输出重要，尤其在安卓环境。
##### 指标比较：
完成率能更好体现不同方法有效性，如 GPT - 4o 单智能体和多智能体环境结构成功率相同但完成率不同。
### 5.研究结论与展望
#### CRAB 框架优势：
引入跨环境任务，采用图结构任务生成和评估方法，减少任务设计工作量，更准确评估智能体。
#### Crab Benchmark - v0 特点：
包含高质量跨环境任务，配备视觉提示技术，能有效区分 MLM 和智能体系统。
#### 研究局限与未来方向：
子任务基于特定系统原生应用，覆盖范围有限；视觉提示方法不能识别全部元素；未来可扩展数据集和环境，测试更多模型、提示和多智能体结构，改进视觉提示方法。
