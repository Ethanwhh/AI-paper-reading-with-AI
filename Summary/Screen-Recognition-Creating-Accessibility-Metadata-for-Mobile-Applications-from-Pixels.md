# Screen Recognition: Creating Accessibility Metadata for Mobile Applications from Pixels

## 思维导图
![思维导图](/imgs/Screen-Recognition-Creating-Accessibility-Metadata-for-Mobile-Applications-from-Pixels.jpg)

## 全文总结

“Screen Recognition: Creating Accessibility Metadata for Mobile Applications from Pixels” 由 Xiaoyi Zhang 等人撰写。移动平台许多无障碍功能依赖应用提供准确元数据，但很多应用未提供，本文提出从像素自动创建移动应用无障碍元数据的方法，通过收集标注数据训练模型检测 UI 元素，并引入启发式方法和其他模型改进，经用户研究验证可提高应用无障碍性，为解决移动应用无障碍问题提供新思路。

### 1.研究背景

- 移动平台的无障碍功能（如屏幕阅读器、开关控制等）需要应用提供完整准确的用户界面（UI）组件元数据，但大量应用在这方面存在不足，即使是热门应用也常出现基本的无障碍问题。

- 开发者可能因不了解、缺乏专业知识或未重视等原因未提供元数据，且使用第三方 UI 工具包时也存在内置无障碍支持有限的情况。

### 2.相关工作

- 支持移动无障碍：以往通过教育、标准和测试工具鼓励开发者解决无障碍问题，但进展缓慢，现有研究在自动生成无障碍元数据方面存在局限，本文旨在更全面地从像素生成元数据。

- 从像素检测 UI 元素：早期从非像素源提取 UI 信息有缺陷，基于像素的方法更独立，但以往研究多针对应用设计早期阶段，本文的深度学习方法针对无障碍用例优化，提供更全面元数据且资源消耗少。

- 理解 UI 语义：除检测 UI 元素，还需理解其语义，本文通过与视障人士合作制定启发式方法确定导航顺序和分组，并构建模型预测元素交互性和状态，利用现有功能生成图标和图片替代文本。

### 3.iOS 应用屏幕数据集

- 屏幕收集：从美国 App Store 23 个非游戏和非 AR 应用类别中各下载前 200 个免费应用，收集 80,945 个屏幕，提取截图、UI 树和无障碍树等元数据，筛选后得到 77,637 个标注屏幕。

- 屏幕标注：40 名工作人员标注屏幕 UI 元素，包括分割确定边界框和分类确定属性，经质量监控和错误纠正，总错误率为 2.62%。

- 数据集组成分析：UI 类型存在不平衡，文本标注最多，滑块最少；59% 的屏幕存在标注与无障碍 UI 元素不匹配情况，不同 UI 类型匹配率有差异，表明有必要生成无障碍元数据。

### 4.UI 检测模型

- 模型架构：对比多种模型后选用 SSD 模型，以 MobileNetV1 为骨干网络，结合 FPN 提高小对象检测能力，处理数据不平衡并采用类平衡损失函数，在 iPhone 11 上推理仅需约 10ms，内存占用 20MB。

- 训练和测试数据：基于标注的 UI 类型确定 13 个训练测试类，按应用分割数据集保证泛化性，训练集 72,635 个屏幕，测试集 5,002 个屏幕。

- 评估：在测试集上平均精度（AP）达 71.3%，加权平均 AP 为 82.7%，通过混淆矩阵分析模型对不同 UI 类型的误分类情况，并采用特定于无障碍服务的评估指标提高了平均 AP。

### 5.改善 UI 检测结果的用户体验

- 查找缺失和去除多余检测：根据数据集中规律和 OCR 引擎处理文本等元素的缺失和多余检测问题。

- 识别 UI 内容：利用 iOS 内置功能识别文本、图标和图片内容。

- 确定 UI 选择状态：对不同 UI 类型（如 Toggle、Checkbox 等）采用不同方法确定选择状态，在测试集上有较高准确率。

- 确定 UI 交互性：根据用户反馈训练模型预测图标可点击性，设置阈值平衡精度和召回率。

- 分组元素提高导航效率：基于 UI 类型等制定启发式方法分组元素，减少导航元素数量，虽有错误但总体有效，且受 iOS 设计影响可能需适配其他平台。

- 推断导航顺序：采用 OCR XY - cut 算法确定导航顺序，在大部分屏幕上与人工标注的真实导航顺序匹配良好，对错误分析后发现可通过改进分组启发式方法提升。

### 6.用户研究

- 研究过程：9 名视障人士参与，选择使用常规 VoiceOver 困难或无法使用的应用，分别用常规 VoiceOver 和 Screen Recognition 测试 10 分钟，收集反馈。

- 研究结果：Screen Recognition 使应用平均可用性评分从 2.08 显著提高到 3.73，但仍有部分应用表现不佳。参与者认可其对不可访问应用的改善，但也指出存在标签需解释、无法识别无视觉提示功能和复杂屏幕卡顿等问题。

### 7.讨论与未来工作

未来需提高模型和启发式方法准确性，探索元数据持久化，应用到其他平台，结合应用视图层次信息，拓展模型和启发式方法的用例，考虑模型的长期有效性等。

### 8.研究结论：

提出的从像素自动创建移动应用无障碍元数据的方法有前景，可提高应用无障碍性，为解决长期存在的无障碍问题提供新途径，且有望帮助开发者创建更无障碍的应用。
